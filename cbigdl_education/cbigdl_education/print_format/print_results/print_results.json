{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-06-08 14:16:50.041671",
 "css": "table {\n  font-family: arial, sans-serif;\n  border-collapse: collapse;\n  width: 100%;\n}\n\ntd, th {\n  border: 1px solid #dddddd;\n  text-align: left;\n  padding: 8px;\n}\n\ntr:nth-child(even) {\n  background-color: #dddddd;\n}",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Student Result",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Student Results</div><br><small class=\\\"sub-heading\\\"></small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"form\", \"print_hide\": 0, \"label\": \"Form\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"academic_term\", \"print_hide\": 0, \"label\": \"Academic Term\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table>\\n  <tr>\\n    <th>Rank</th>\\n    <th>Admission Number</th>\\n    {% set subjects = [] %}\\n    {% for item in get_student_result(doc) if item.academic_terms == doc.academic_term %}\\n      {% if item.subject not in subjects %}\\n        {% set _ = subjects.append(item.subject) %}\\n        <th>{{ item.subject }}</th>\\n      {% endif %}\\n    {% endfor %}\\n    <th>Total Marks</th>\\n    <th>Grade</th>\\n    <th>Number of Subjects</th>  <!-- Added column for number of subjects -->\\n  </tr>\\n  {% set admission_numbers = [] %}\\n  {% set student_data = [] %}\\n  {% for item in get_student_result(doc) if item.academic_terms == doc.academic_term %}\\n    {% if item.admission_number not in admission_numbers %}\\n      {% set _ = admission_numbers.append(item.admission_number) %}\\n      {% set subject_grades = {} %}\\n      {% set total_marks = [] %}\\n      {% set subject_counts = {} %}\\n      {% for inner_item in get_student_result(doc) if inner_item.academic_terms == doc.academic_term and inner_item.admission_number == item.admission_number %}\\n        {% set _ = subject_grades.update({inner_item.subject: inner_item.grade}) %}\\n        {% set _ = total_marks.append(inner_item.total_marks|int) %}\\n        {% if inner_item.subject not in subject_counts %}\\n          {% set _ = subject_counts.update({inner_item.subject: 1}) %}\\n        {% else %}\\n          {% set _ = subject_counts[inner_item.subject] + 1 %}\\n        {% endif %}\\n      {% endfor %}\\n      {% set total_subjects = subject_counts|length %}\\n      {% set average_marks = (total_marks|sum / total_subjects)/100*12 %}\\n      {% set grade = 'E' %}\\n      {% if average_marks >= 12.0 %}\\n        {% set grade = 'A' %}\\n      {% elif average_marks >= 11.0 %}\\n        {% set grade = 'A-' %}\\n      {% elif average_marks >= 10.0 %}\\n        {% set grade = 'B+' %}\\n      {% elif average_marks >= 9.0 %}\\n        {% set grade = 'B' %}\\n      {% elif average_marks >= 8.0 %}\\n        {% set grade = 'B-' %}\\n      {% elif average_marks >= 7.0 %}\\n        {% set grade = 'C+' %}\\n      {% elif average_marks >= 6.0 %}\\n        {% set grade = 'C' %}\\n      {% elif average_marks >= 5.0 %}\\n        {% set grade = 'C-' %}\\n      {% elif average_marks >= 4.0 %}\\n        {% set grade = 'D+' %}\\n      {% elif average_marks >= 3.0 %}\\n        {% set grade = 'D' %}\\n      {% elif average_marks >= 2.0 %}\\n        {% set grade = 'D-' %}\\n      {% endif %}\\n      {% set _ = student_data.append({ 'admission_number': item.admission_number, 'subject_grades': subject_grades, 'total_marks': total_marks|sum, 'grade': grade, 'total_subjects': total_subjects, 'average_marks': average_marks }) %}\\n    {% endif %}\\n  {% endfor %}\\n  {% set sorted_student_data = student_data|sort(attribute='average_marks', reverse=True) %}\\n  {% for rank, data in enumerate(sorted_student_data, start=1) %}\\n    <tr>\\n      <td>{{ rank }}</td>\\n      <td>{{ data.admission_number }}</td>\\n      {% for subject in subjects %}\\n        <td>{{ data.subject_grades[subject] if data.subject_grades[subject] is defined else '' }}</td>\\n      {% endfor %}\\n      <td>{{ data.total_marks }}</td>\\n      <td>{{ data.grade }}</td>\\n      <td>{{ data.total_subjects }}</td>  <!-- Added column for number of subjects -->\\n    </tr>\\n  {% endfor %}\\n</table>\\n\"}]",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2023-06-12 16:33:54.855825",
 "modified_by": "Administrator",
 "module": "Cbigdl Education",
 "name": "Print Results",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}